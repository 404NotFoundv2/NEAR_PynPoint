

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>NEAR Data with PynPoint &mdash; NEAR 0.1 documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script type="text/javascript" src="_static/jquery.js"></script>
        <script type="text/javascript" src="_static/underscore.js"></script>
        <script type="text/javascript" src="_static/doctools.js"></script>
        <script type="text/javascript" src="_static/language_data.js"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="prev" title="Welcome to NEAR’s documentation!" href="index.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="index.html" class="icon icon-home"> NEAR
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">NEAR Data with PynPoint</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#introduction">Introduction</a></li>
<li class="toctree-l2"><a class="reference internal" href="#install-pynpoint">Install PynPoint</a></li>
<li class="toctree-l2"><a class="reference internal" href="#running-pynpoint">Running PynPoint</a></li>
<li class="toctree-l2"><a class="reference internal" href="#results">Results</a></li>
</ul>
</li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">NEAR</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
      <li>NEAR Data with PynPoint</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/installation.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="near-data-with-pynpoint">
<h1>NEAR Data with PynPoint<a class="headerlink" href="#near-data-with-pynpoint" title="Permalink to this headline">¶</a></h1>
<div class="section" id="introduction">
<span id="id1"></span><h2>Introduction<a class="headerlink" href="#introduction" title="Permalink to this headline">¶</a></h2>
<p>This guide shows the basic steps to process NEAR data with PynPoint. First we describe the steps required to install PynPoint.  After that, the basic steps how to get PCA working with PynPoint are shown. Python version 3 is used.</p>
</div>
<div class="section" id="install-pynpoint">
<h2>Install PynPoint<a class="headerlink" href="#install-pynpoint" title="Permalink to this headline">¶</a></h2>
<p>PynPoint is available in the <a href="https://pypi.org/project/pynpoint/" target="_blank">PyPI repository</a> and on <a href="https://github.com/PynPoint/PynPoint" target="_blank">Github</a>. We recommend using a Python virtual environment to install and run PynPoint such that the correct versions of the dependencies can be installed without affecting other installed Python packages. First install <cite>virtualenv</cite> with the <a href="https://packaging.python.org/tutorials/installing-packages/" target="_blank">pip package manager</a>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ python3 -m pip install virtualenv
</pre></div>
</div>
<p>Then create a virtual environment, for example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ virtualenv folder_name
</pre></div>
</div>
<p>And activate the environment with:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ source folder_name/bin/activate
</pre></div>
</div>
<p>PynPoint can now be installed with pip:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ python3 -m pip install pynpoint
</pre></div>
</div>
<p>If you do not use a virtual environment, you might need to add the ‘<cite>- - user</cite>’ argument:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ python3 -m pip install --user pynpoint
</pre></div>
</div>
<p>The installation can be tested by starting Python in interactive mode and printing the PynPoint version:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">pynpoint</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span> <span class="n">pynpoint</span><span class="o">.</span><span class="n">__version__</span>
</pre></div>
</div>
<p>A virtual environment is deactivate with:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ deactivate
</pre></div>
</div>
</div>
<div class="section" id="running-pynpoint">
<span id="running"></span><h2>Running PynPoint<a class="headerlink" href="#running-pynpoint" title="Permalink to this headline">¶</a></h2>
<p>We provide here a short script how to run PynPoint with the data provided here. No bad pixel or background subtraction modules are used. An overview of all the modules available in PynPoint is available <a href="https://pynpoint.readthedocs.io/en/latest/overview.html" target="_blank">here</a>.</p>
<p>In the project folder, create 5 different folders:</p>
<blockquote>
<div><p>$ mkdir working_place input_place input_place1 input_place2 output_place</p>
</div></blockquote>
<p>For the pipeline we require a folder <code class="docutils literal notranslate"><span class="pre">working_place</span></code>, <code class="docutils literal notranslate"><span class="pre">input_place</span></code>, <code class="docutils literal notranslate"><span class="pre">output_place</span></code>. However, in total we have 3 different import fits files (reference PSF, Nod A, Nod B) that we would like to have under a different tag in the database. Therefore we also create a folder <code class="docutils literal notranslate"><span class="pre">input_place1</span></code> and <code class="docutils literal notranslate"><span class="pre">input_place2</span></code></p>
<p>The simulation data used as input can be downloaded <a href="https://drive.google.com/open?id=1TPSgXjazewwBsBVe-Zu5fstf9X2nlwQX" target="_blank">here</a>. Put <cite>set1.fits</cite> in <code class="docutils literal notranslate"><span class="pre">input_place1</span></code>, <cite>set2.fits</cite> in <code class="docutils literal notranslate"><span class="pre">input_place2</span></code> and <cite>Ref_PSF_aCenA.fits</cite> into <code class="docutils literal notranslate"><span class="pre">input_place</span></code>.</p>
<p>The total script is then written in a .py file. You can download it <a href="https://drive.google.com/file/d/1j3CvWVynQYqtUU_CB3VQCienh8A_APMd/view" target="_blank">here</a>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">pynpoint</span> <span class="k">as</span> <span class="nn">p</span>

<span class="n">working_place</span> <span class="o">=</span> <span class="s2">&quot;/path/to/working_place/&quot;</span>
<span class="n">output_place</span> <span class="o">=</span> <span class="s2">&quot;/path/to/output_place/&quot;</span>
<span class="n">input_place</span> <span class="o">=</span> <span class="s2">&quot;/path/to/input_place/&quot;</span>
<span class="n">input1</span> <span class="o">=</span> <span class="s2">&quot;/path/to/input_place1/&quot;</span>
<span class="n">input2</span> <span class="o">=</span> <span class="s2">&quot;/path/to/input_place2/&quot;</span>

<span class="n">pipeline</span> <span class="o">=</span> <span class="n">p</span><span class="o">.</span><span class="n">Pypeline</span><span class="p">(</span><span class="n">working_place_in</span><span class="o">=</span><span class="n">working_place</span><span class="p">,</span>
                      <span class="n">input_place_in</span><span class="o">=</span><span class="n">input_place</span><span class="p">,</span>
                      <span class="n">output_place_in</span><span class="o">=</span><span class="n">output_place</span><span class="p">)</span>

<span class="c1"># Read fits of Nod A</span>
<span class="n">inputa</span> <span class="o">=</span> <span class="n">p</span><span class="o">.</span><span class="n">FitsReadingModule</span><span class="p">(</span><span class="n">name_in</span><span class="o">=</span><span class="s2">&quot;inputa&quot;</span><span class="p">,</span>
                             <span class="n">input_dir</span><span class="o">=</span><span class="n">input_place1</span><span class="p">,</span>
                             <span class="n">image_tag</span><span class="o">=</span><span class="s2">&quot;input1&quot;</span><span class="p">,</span>
                             <span class="n">overwrite</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                             <span class="n">check</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">pipeline</span><span class="o">.</span><span class="n">add_module</span><span class="p">(</span><span class="n">inputa</span><span class="p">)</span>

<span class="c1"># Read fits of Nod B</span>
<span class="n">inputb</span> <span class="o">=</span> <span class="n">p</span><span class="o">.</span><span class="n">FitsReadingModule</span><span class="p">(</span><span class="n">name_in</span><span class="o">=</span><span class="s2">&quot;inputb&quot;</span><span class="p">,</span>
                             <span class="n">input_dir</span><span class="o">=</span><span class="n">input_place2</span><span class="p">,</span>
                             <span class="n">image_tag</span><span class="o">=</span><span class="s2">&quot;input2,</span>
                             <span class="n">overwrite</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                             <span class="n">check</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">pipeline</span><span class="o">.</span><span class="n">add_module</span><span class="p">(</span><span class="n">inputb</span><span class="p">)</span>

<span class="c1"># Subtract the two input tags</span>
<span class="n">subtract</span> <span class="o">=</span> <span class="n">p</span><span class="o">.</span><span class="n">SubtractImagesModule</span><span class="p">(</span><span class="n">name_in</span><span class="o">=</span><span class="s2">&quot;subtract&quot;</span><span class="p">,</span>
                                  <span class="n">image_in_tags</span><span class="o">=</span><span class="p">(</span><span class="s2">&quot;input1&quot;</span><span class="p">,</span> <span class="s2">&quot;input2&quot;</span><span class="p">),</span>
                                  <span class="n">image_out_tag</span><span class="o">=</span><span class="s2">&quot;subtract&quot;</span><span class="p">,</span>
                                  <span class="n">scaling</span><span class="o">=</span><span class="mf">1.</span><span class="p">)</span>
<span class="n">pipeline</span><span class="o">.</span><span class="n">add_module</span><span class="p">(</span><span class="n">subtract</span><span class="p">)</span>

<span class="c1"># Crop the image around the center</span>
<span class="n">crop</span> <span class="o">=</span> <span class="n">p</span><span class="o">.</span><span class="n">CropImagesModule</span><span class="p">(</span><span class="n">name_in</span><span class="o">=</span><span class="s2">&quot;crop&quot;</span><span class="p">,</span>
                          <span class="n">image_in_tag</span><span class="o">=</span><span class="s2">&quot;subtract&quot;</span><span class="p">,</span>
                          <span class="n">image_out_tag</span><span class="o">=</span><span class="s2">&quot;cropped&quot;</span><span class="p">,</span>
                          <span class="n">size</span><span class="o">=</span><span class="mf">5.</span><span class="p">,</span>
                          <span class="n">center</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>
<span class="n">pipeline</span><span class="o">.</span><span class="n">add_module</span><span class="p">(</span><span class="n">crop</span><span class="p">)</span>

<span class="c1"># Write the output &#39;cropped&#39; to a fits file in the ouput_place directory</span>
<span class="n">write</span> <span class="o">=</span> <span class="n">p</span><span class="o">.</span><span class="n">FitsWritingModule</span><span class="p">(</span><span class="n">name_in</span><span class="o">=</span><span class="s2">&quot;write&quot;</span><span class="p">,</span>
                            <span class="n">file_name</span><span class="o">=</span><span class="s2">&quot;cropped.fits&quot;</span><span class="p">,</span>
                            <span class="n">output_dir</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                            <span class="n">data_tag</span><span class="o">=</span><span class="s2">&quot;cropped&quot;</span><span class="p">,</span>
                            <span class="n">data_range</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                            <span class="n">overwrite</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">pipeline</span><span class="o">.</span><span class="n">add_module</span><span class="p">(</span><span class="n">write</span><span class="p">)</span>

<span class="c1"># Now the required steps in PynPoint are done.</span>
<span class="c1"># Below we show how PCA can be evaluated. At last, we show how to do the contrastcurve.</span>

<span class="c1"># Interpolate POSANG angles between start and end, necessary for the PCA &amp; Contrastcurvemodule</span>
<span class="n">angle</span> <span class="o">=</span> <span class="n">p</span><span class="o">.</span><span class="n">AngleInterpolationModule</span><span class="p">(</span><span class="n">name_in</span><span class="o">=</span><span class="s2">&quot;angle_inter&quot;</span><span class="p">,</span>
                                   <span class="n">data_tag</span><span class="o">=</span><span class="s2">&quot;cropped&quot;</span><span class="p">)</span>
<span class="n">pipeline</span><span class="o">.</span><span class="n">add_module</span><span class="p">(</span><span class="n">angle</span><span class="p">)</span>

<span class="c1"># PCA</span>
<span class="n">pca</span> <span class="o">=</span> <span class="n">p</span><span class="o">.</span><span class="n">PcaPsfSubtractionModule</span><span class="p">(</span><span class="n">name_in</span><span class="o">=</span><span class="s2">&quot;pca&quot;</span><span class="p">,</span>
                                <span class="n">pca_numbers</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span>
                                <span class="n">images_in_tag</span><span class="o">=</span><span class="s2">&quot;cropped&quot;</span><span class="p">,</span>
                                <span class="n">reference_in_tag</span><span class="o">=</span><span class="s2">&quot;cropped&quot;</span><span class="p">,</span>
                                <span class="n">res_median_tag</span><span class="o">=</span><span class="s2">&quot;residuals&quot;</span><span class="p">,</span>
                                <span class="n">res_mean_tag</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                                <span class="n">res_weighted_tag</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                                <span class="n">res_rot_mean_clip_tag</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                                <span class="n">res_arr_out_tag</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                                <span class="n">basis_out_tag</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                                <span class="n">extra_rot</span><span class="o">=</span><span class="mf">0.</span><span class="p">,</span>
                                <span class="n">subtract_mean</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="n">pipeline</span><span class="o">.</span><span class="n">add_module</span><span class="p">(</span><span class="n">pca</span><span class="p">)</span>

<span class="c1"># Visually inspect the residuals</span>
<span class="n">writepca</span> <span class="o">=</span> <span class="n">p</span><span class="o">.</span><span class="n">FitsWritingModule</span><span class="p">(</span><span class="n">name_in</span><span class="o">=</span><span class="s2">&quot;writepca&quot;</span><span class="p">,</span>
                               <span class="n">file_name</span><span class="o">=</span><span class="s2">&quot;pca.fits&quot;</span><span class="p">,</span>
                               <span class="n">output_dir</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                               <span class="n">data_tag</span><span class="o">=</span><span class="s2">&quot;residuals&quot;</span><span class="p">,</span>
                               <span class="n">data_range</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                               <span class="n">overwrite</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">pipeline</span><span class="o">.</span><span class="n">add_module</span><span class="p">(</span><span class="n">writepca</span><span class="p">)</span>


<span class="c1"># CONTRASTCURVE MODULE</span>

<span class="c1"># Prepare psf in tag for contrastcurve module. This is the reference PSF.</span>
<span class="n">inputpsf</span> <span class="o">=</span> <span class="n">p</span><span class="o">.</span><span class="n">FitsReadingModule</span><span class="p">(</span><span class="n">name_in</span><span class="o">=</span><span class="s2">&quot;input_psf&quot;</span><span class="p">,</span>
                               <span class="n">input_dir</span><span class="o">=</span><span class="n">input_place</span><span class="p">,</span>
                               <span class="n">image_tag</span><span class="o">=</span><span class="s2">&quot;psf_large&quot;</span><span class="p">,</span>
                               <span class="n">overwrite</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                               <span class="n">check</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">pipeline</span><span class="o">.</span><span class="n">add_module</span><span class="p">(</span><span class="n">inputpsf</span><span class="p">)</span>

<span class="n">croppsf</span> <span class="o">=</span> <span class="n">p</span><span class="o">.</span><span class="n">CropImagesModule</span><span class="p">(</span><span class="n">name_in</span><span class="o">=</span><span class="s2">&quot;croppsf&quot;</span><span class="p">,</span>
                             <span class="n">image_in_tag</span><span class="o">=</span><span class="s2">&quot;psf_large&quot;</span><span class="p">,</span>
                             <span class="n">image_out_tag</span><span class="o">=</span><span class="s2">&quot;psf&quot;</span><span class="p">,</span>
                             <span class="n">center</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                             <span class="n">size</span><span class="o">=</span><span class="mf">5.</span><span class="p">)</span>
<span class="n">pipeline</span><span class="o">.</span><span class="n">add_module</span><span class="p">(</span><span class="n">croppsf</span><span class="p">)</span>

<span class="c1"># Run the contrastcurve module, between 0.8 to 3 arcseconds, in steps of 0.1 at every 60 degrees.</span>
<span class="c1"># Below is a fpf of 2.87e-6 used, equivalent to a 5-sigma gaussian confidence interval.</span>
<span class="c1"># The PCA is done within this module.</span>
<span class="n">contrast</span> <span class="o">=</span> <span class="n">p</span><span class="o">.</span><span class="n">ContrastCurveModule</span><span class="p">(</span><span class="n">name_in</span><span class="o">=</span><span class="s2">&quot;contrast1&quot;</span><span class="p">,</span>
                                 <span class="n">image_in_tag</span><span class="o">=</span><span class="s2">&quot;cropped&quot;</span><span class="p">,</span>
                                 <span class="n">psf_in_tag</span><span class="o">=</span><span class="s2">&quot;psf&quot;</span><span class="p">,</span>
                                 <span class="n">contrast_out_tag</span><span class="o">=</span><span class="s2">&quot;contrast_out&quot;</span><span class="p">,</span>
                                 <span class="n">separation</span><span class="o">=</span><span class="p">(</span><span class="mf">0.8</span><span class="p">,</span> <span class="mf">3.</span><span class="p">,</span> <span class="mf">0.1</span><span class="p">),</span>
                                 <span class="n">angle</span><span class="o">=</span><span class="p">(</span><span class="mf">0.</span><span class="p">,</span> <span class="mf">360.</span><span class="p">,</span> <span class="mf">60.</span><span class="p">),</span>
                                 <span class="n">magnitude</span><span class="o">=</span><span class="p">(</span><span class="mf">9.</span><span class="p">,</span> <span class="mf">1.</span><span class="p">),</span>
                                 <span class="n">threshold</span><span class="o">=</span><span class="p">(</span><span class="s2">&quot;fpf&quot;</span><span class="p">,</span> <span class="mf">2.87e-6</span><span class="p">),</span>
                                 <span class="n">accuracy</span><span class="o">=</span><span class="mf">0.1</span><span class="p">,</span>
                                 <span class="n">psf_scaling</span><span class="o">=</span><span class="mf">1.</span><span class="p">,</span>
                                 <span class="n">aperture</span><span class="o">=</span><span class="mf">0.2</span><span class="p">,</span>
                                 <span class="n">ignore</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                                 <span class="n">pca_number</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span>
                                 <span class="n">norm</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                                 <span class="n">cent_size</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                                 <span class="n">edge_size</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                                 <span class="n">extra_rot</span><span class="o">=</span><span class="mf">0.</span><span class="p">)</span>
<span class="n">pipeline</span><span class="o">.</span><span class="n">add_module</span><span class="p">(</span><span class="n">contrast</span><span class="p">)</span>

<span class="c1"># Write the result of the contrastcurve to a text file</span>
<span class="c1"># columns: (separation, azimuthally averaged contrast, azimuthal variance of the contrast, false positive fraction)</span>
<span class="n">write_text</span> <span class="o">=</span> <span class="n">p</span><span class="o">.</span><span class="n">TextWritingModule</span><span class="p">(</span><span class="n">file_name</span><span class="o">=</span><span class="s2">&quot;contrast&quot;</span><span class="p">,</span>
                                 <span class="n">name_in</span><span class="o">=</span><span class="s2">&quot;contrast_text&quot;</span><span class="p">,</span>
                                 <span class="n">output_dir</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                                 <span class="n">data_tag</span><span class="o">=</span><span class="s2">&quot;contrast_out&quot;</span><span class="p">,</span>
                                 <span class="n">header</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>
<span class="n">pipeline</span><span class="o">.</span><span class="n">add_module</span><span class="p">(</span><span class="n">write_text</span><span class="p">)</span>

<span class="c1"># Run the pipeline</span>
<span class="n">pipeline</span><span class="o">.</span><span class="n">run</span><span class="p">()</span>
</pre></div>
</div>
<p>When the script starts running, PynPoint creates a <code class="docutils literal notranslate"><span class="pre">PynPoint_config.ini</span></code> file in <code class="docutils literal notranslate"><span class="pre">working_place</span></code>. In this file, edit <code class="docutils literal notranslate"><span class="pre">PIXSCALE</span></code> to 0.045 for VISIR. Also, set <code class="docutils literal notranslate"><span class="pre">CPU</span></code> and <code class="docutils literal notranslate"><span class="pre">MEMORY</span></code> to a value desired.</p>
</div>
<div class="section" id="results">
<span id="id2"></span><h2>Results<a class="headerlink" href="#results" title="Permalink to this headline">¶</a></h2>
<p>The output of the PCA should look like this (Open it with DS9 to read the fits file, here we use zscale and color b):</p>
<a class="reference internal image-reference" href="https://lh3.googleusercontent.com/ZTpbnudQq1884kaEc0q5U6D9SZFWoyFXEOunAwNK2i7w5IDEm1uhqymKvnDkRhn3TG2HxnF5b5HL_qfATUAmBnkoK7qJrdpafq2P7xfIvpW5wiN4L2XlFVjqpGk7M2dpnkJ_p3INgtOxPIaPkWE0m6u3l4mmorRymER475h-7x8YFtWj-XRr0F04v6MOi0zQ0klIfzLL0M21EvtGmcjbqkQv5Rpt28x2elq2dMmpAJ-8Wrk_qu_hS3Va2bRDgv8hqOH5s6Ycd1yCKEXukwHiJ3UAa77ZU_NT3XdZX0u-sqOFvKusGVtGvghx-us_PySpNksf6cIjxF1AHxdgPrYCLw3bOCMMCjHWzK2lNHTZAfGZDSx0VTwqgVLBu0hS7-yB_H1jfEGpd_mNJ7pxPkxxWD25jJA0Lr2CeHViEKsmCftpOF41g1Ma2JXggAoL0FGlya-zN-DkJJBJj18G3FWyMxtU8dRsO02pQDdzJ6fKkQ1ekdzi09dj9sZEV2mDsdagACXK1AT34fhNQFvknv5gBRl-beUAhy4G6YMYljfIVuxESmLXRsKLD2b_Fs-Sk9wIR_hnOKmt6Yp4NEPkXUPgYWA-4gJzhZbKecLJCdKUeqdbcCV_y5ywXQAjC6NQLp6lbvlim9YMO0TqpnKO9QPI2yvE1scl6g=w1276-h1139-no?.png"><img alt="PCA Image" src="https://lh3.googleusercontent.com/ZTpbnudQq1884kaEc0q5U6D9SZFWoyFXEOunAwNK2i7w5IDEm1uhqymKvnDkRhn3TG2HxnF5b5HL_qfATUAmBnkoK7qJrdpafq2P7xfIvpW5wiN4L2XlFVjqpGk7M2dpnkJ_p3INgtOxPIaPkWE0m6u3l4mmorRymER475h-7x8YFtWj-XRr0F04v6MOi0zQ0klIfzLL0M21EvtGmcjbqkQv5Rpt28x2elq2dMmpAJ-8Wrk_qu_hS3Va2bRDgv8hqOH5s6Ycd1yCKEXukwHiJ3UAa77ZU_NT3XdZX0u-sqOFvKusGVtGvghx-us_PySpNksf6cIjxF1AHxdgPrYCLw3bOCMMCjHWzK2lNHTZAfGZDSx0VTwqgVLBu0hS7-yB_H1jfEGpd_mNJ7pxPkxxWD25jJA0Lr2CeHViEKsmCftpOF41g1Ma2JXggAoL0FGlya-zN-DkJJBJj18G3FWyMxtU8dRsO02pQDdzJ6fKkQ1ekdzi09dj9sZEV2mDsdagACXK1AT34fhNQFvknv5gBRl-beUAhy4G6YMYljfIVuxESmLXRsKLD2b_Fs-Sk9wIR_hnOKmt6Yp4NEPkXUPgYWA-4gJzhZbKecLJCdKUeqdbcCV_y5ywXQAjC6NQLp6lbvlim9YMO0TqpnKO9QPI2yvE1scl6g=w1276-h1139-no?.png" style="width: 600px;" /></a>
<p>And plotting the output of the contrastcurve (errorbar is the variance of the different angles, the third column of the text file) using matplotlib will show:</p>
<a class="reference internal image-reference" href="https://lh3.googleusercontent.com/wKRxB9hnf5CNG6L5pcPP-cfc7nc0G56nTauctrySP2GpSvg3IAYCrmfNPEItY91qQOGp2ehvWHsO4RRvuE8l7ooMtmiYKY3BCehzSNfiAWcWtNjVJP0QpGdx1OiKdWHZJBb4neGxfoCC7J5gFdH2cugG25GUsS13UitLQkCA6GTzUNZsmlE6LUzDJv4-C5AmuB83UvAYgK8Za4IKct1z2M7x7MsUcRRAy9p6I9NWyiazSz8AZodCkhnP2sVmXDeDEiY0lt6AemXjjiDWRQFqYxsa4eWPlycepefMGKZ5LF2GUnzDv2Ao7SweLnuzmMDNDBtIfugRfvNXu0QphHWgSB_s33n4I-ByqZN0v2zR_zH3NJLKMHqzl5nuyHSe4dunnzfBQjDA8VOSTXljPhlZu6U0zukMC1NjJtzeH_x6DoiaNifvwcQpeVSTqBCYEPUHkdb03nQEFJfZvPApOEo1GYJinS2MrZU0wVQxN8hrJDBQhH-0WLEI6IJAGRWTaO7kkYi2Ybds4r-G9JJmvacPQDftdzHwxAq7XY4lnbyw-g6hJZzX_wSFrVMPvXHt722EwEWkd8nuUc-_KET-t54NZdt9UehPunkNW5VJc7HcrEZXrqvOFGQtI1G7v4xhQzopayn6MwJOM65kqi_ie0T45n-5Dz6k2AuQHqi6LEJt-P3owZFiKv5xnUvSSprLYqEbsSVlcmPRYtE4Y6Jc_xDxpg8=w640-h480-no"><img alt="ContrastCurve" src="https://lh3.googleusercontent.com/wKRxB9hnf5CNG6L5pcPP-cfc7nc0G56nTauctrySP2GpSvg3IAYCrmfNPEItY91qQOGp2ehvWHsO4RRvuE8l7ooMtmiYKY3BCehzSNfiAWcWtNjVJP0QpGdx1OiKdWHZJBb4neGxfoCC7J5gFdH2cugG25GUsS13UitLQkCA6GTzUNZsmlE6LUzDJv4-C5AmuB83UvAYgK8Za4IKct1z2M7x7MsUcRRAy9p6I9NWyiazSz8AZodCkhnP2sVmXDeDEiY0lt6AemXjjiDWRQFqYxsa4eWPlycepefMGKZ5LF2GUnzDv2Ao7SweLnuzmMDNDBtIfugRfvNXu0QphHWgSB_s33n4I-ByqZN0v2zR_zH3NJLKMHqzl5nuyHSe4dunnzfBQjDA8VOSTXljPhlZu6U0zukMC1NjJtzeH_x6DoiaNifvwcQpeVSTqBCYEPUHkdb03nQEFJfZvPApOEo1GYJinS2MrZU0wVQxN8hrJDBQhH-0WLEI6IJAGRWTaO7kkYi2Ybds4r-G9JJmvacPQDftdzHwxAq7XY4lnbyw-g6hJZzX_wSFrVMPvXHt722EwEWkd8nuUc-_KET-t54NZdt9UehPunkNW5VJc7HcrEZXrqvOFGQtI1G7v4xhQzopayn6MwJOM65kqi_ie0T45n-5Dz6k2AuQHqi6LEJt-P3owZFiKv5xnUvSSprLYqEbsSVlcmPRYtE4Y6Jc_xDxpg8=w640-h480-no" style="width: 600px;" /></a>
<p>The contrast decrease after 1.8 arcseconds is a result of the sidelobes visible in the image (negative psf residue from the subtraction). This becomes more clear in the image below (cropped.fits file), where the green circle has a radius of 1.8 arcseconds.</p>
<a class="reference internal image-reference" href="https://lh3.googleusercontent.com/6i9HxIqNP9cQRDmBBzxEHarLNODNr0UaGViTzooNqNYCbzXw03QZ006WrCQRl2VRp9jj49AH2aa_k1Ggkqj3VvQQM7qJDh4hKQDAm9G0DnOtB8sRgX_WB7RVUSoVqla_ZmR5gnsfZSnvT9DEPNYiw-Cf9gcV7wsDtOFP9UzDKTFkBSRPomTlboHkW_mLvQ50Pfi6Yc0uHK3XpEFTkwi4kWqUcYMPiowvd7q6m8-y1AbeUXOvR3f9lDQfo1o6sn4W6ZzSyVb9rr2izx-KXPjdxL3yh_WkDojXXEuugDISeMIxuf9J2ZvtHGvoCFn8AB7bevMsnKAIFI1FKiqxjoNXMJPvRBCuuEl1mHI21brO_lXwLuBIkqHhTXRWUUS9zMFhjIl_iqGdKDJ7As38ZGnvOsJ1z4dytteUG8hoepCPifyX5EZ7prg-mAQ18IgMabgGWqRIqZIj95VARnfhoneoxOBgeQAXBYUX5kqbbGeMBeweVyTweW37R1dO0KHG4z_y808O6hjwZ1ZfDktlrq35U19hi18gtMyvZOi_HzsHQ1KIbomTL3c6OKstXInTff4ONlqvJpV-MGuj5f9vrcrEFv71xEZQth1S9TgltasayljLIxHsR5z_QYbt5MTfBBvpANMhI5aBLHTdn2ouXF6vv9FKN9KwUu_wuNQBqfZMOL0vxB94m2ReTJMiTPHUD4jIpZPK02kQsOjAKNGylxU6QOs=w1273-h1134-no"><img alt="PSF" src="https://lh3.googleusercontent.com/6i9HxIqNP9cQRDmBBzxEHarLNODNr0UaGViTzooNqNYCbzXw03QZ006WrCQRl2VRp9jj49AH2aa_k1Ggkqj3VvQQM7qJDh4hKQDAm9G0DnOtB8sRgX_WB7RVUSoVqla_ZmR5gnsfZSnvT9DEPNYiw-Cf9gcV7wsDtOFP9UzDKTFkBSRPomTlboHkW_mLvQ50Pfi6Yc0uHK3XpEFTkwi4kWqUcYMPiowvd7q6m8-y1AbeUXOvR3f9lDQfo1o6sn4W6ZzSyVb9rr2izx-KXPjdxL3yh_WkDojXXEuugDISeMIxuf9J2ZvtHGvoCFn8AB7bevMsnKAIFI1FKiqxjoNXMJPvRBCuuEl1mHI21brO_lXwLuBIkqHhTXRWUUS9zMFhjIl_iqGdKDJ7As38ZGnvOsJ1z4dytteUG8hoepCPifyX5EZ7prg-mAQ18IgMabgGWqRIqZIj95VARnfhoneoxOBgeQAXBYUX5kqbbGeMBeweVyTweW37R1dO0KHG4z_y808O6hjwZ1ZfDktlrq35U19hi18gtMyvZOi_HzsHQ1KIbomTL3c6OKstXInTff4ONlqvJpV-MGuj5f9vrcrEFv71xEZQth1S9TgltasayljLIxHsR5z_QYbt5MTfBBvpANMhI5aBLHTdn2ouXF6vv9FKN9KwUu_wuNQBqfZMOL0vxB94m2ReTJMiTPHUD4jIpZPK02kQsOjAKNGylxU6QOs=w1273-h1134-no" style="width: 600px;" /></a>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
      
        <a href="index.html" class="btn btn-neutral float-left" title="Welcome to NEAR’s documentation!" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2019, J. Jonker

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>